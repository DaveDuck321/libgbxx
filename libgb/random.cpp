#include <libgb/std/array.hpp>
#include <libgb/std/random.hpp>

#include <stdint.h>

// TODO: we should save memory here by working out a linear feedback shift
// register configuration.
static constexpr libgb::Array random_sequence = {
    13,  118, 223, 200, 217, 195, 141, 220, 72,  44,  228, 14,  164, 254, 247,
    136, 130, 154, 233, 34,  89,  40,  17,  181, 35,  150, 180, 119, 36,  99,
    79,  104, 131, 147, 6,   232, 231, 116, 80,  151, 174, 194, 171, 43,  221,
    70,  211, 203, 202, 198, 216, 59,  201, 46,  227, 189, 93,  246, 113, 3,
    62,  135, 24,  52,  71,  239, 63,  206, 250, 32,  148, 105, 253, 0,   240,
    166, 238, 168, 234, 156, 88,  68,  120, 145, 54,  129, 222, 112, 215, 11,
    73,  4,   95,  67,  210, 64,  47,  58,  83,  197, 20,  170, 57,  97,  1,
    146, 169, 165, 28,  162, 5,   111, 172, 155, 102, 8,   60,  184, 90,  167,
    128, 182, 48,  107, 19,  185, 214, 157, 218, 205, 138, 81,  212, 235, 178,
    161, 137, 159, 82,  126, 229, 176, 225, 153, 124, 152, 245, 139, 242, 196,
    117, 191, 26,  37,  177, 248, 53,  65,  241, 224, 30,  51,  115, 134, 7,
    193, 209, 91,  49,  110, 251, 208, 66,  190, 94,  192, 108, 55,  173, 244,
    125, 114, 243, 132, 142, 100, 230, 2,   98,  15,  56,  50,  21,  16,  22,
    163, 96,  144, 160, 42,  39,  175, 255, 85,  226, 249, 109, 127, 179, 237,
    236, 31,  87,  207, 204, 252, 121, 123, 143, 25,  27,  106, 76,  84,  213,
    103, 77,  18,  186, 133, 219, 45,  78,  12,  61,  187, 122, 29,  75,  33,
    140, 101, 92,  74,  149, 38,  41,  69,  10,  9,   158, 199, 86,  23,  183,
    188};

static uint8_t offset = 0;

auto libgb::uniform_random_byte() -> uint8_t {
  return random_sequence[offset++];
}
